{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","personServices","createPerson","personObj","axios","post","then","response","data","getPersons","get","personDelete","id","delete","personUpdate","put","Filter","value","handleFilterChange","type","onChange","PersonForm","formSubmit","name","nameChange","number","numberChange","onSubmit","Persons","persons","handleDelete","map","person","onClick","good","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorS","Notification","message","error","style","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filter","setNewFilter","setMessage","setError","useEffect","filteredPersons","toLowerCase","includes","event","target","preventDefault","oldPerson","length","window","confirm","updatedPerson","returnedPerson","catch","setTimeout","concat","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ea1dad92.chunk.js","sourcesContent":["import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst createPerson = (personObj) => {\n  const request = axios.post(baseUrl, personObj);\n  return request.then((response) => response.data);\n};\n\nconst getPersons = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst personDelete = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\nconst personUpdate = (personObj) => {\n  const request = axios.put(`${baseUrl}/${personObj.id}`, personObj);\n  return request.then((response) => response.data);\n};\n\nconst personServices = { createPerson, getPersons, personDelete, personUpdate };\n\nexport default personServices;\n","import React from \"react\";\n\nconst Filter = ({ value, handleFilterChange }) => (\n  <div>\n    filter shown with{\" \"}\n    <input type=\"text\" value={value} onChange={handleFilterChange} />\n  </div>\n);\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({ formSubmit, name, nameChange, number, numberChange }) => (\n  <form onSubmit={formSubmit}>\n    <div>\n      name: <input value={name} onChange={nameChange} />\n    </div>\n    <div>\n      number: <input value={number} onChange={numberChange} />\n    </div>\n    <div>\n      <button type=\"submit\"> add</button>\n    </div>\n  </form>\n);\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, handleDelete }) => (\n  <div>\n    {persons.map((person) => (\n      <p key={person.name}>\n        {person.name} {person.number}\n        <button onClick={() => handleDelete(person)}>delete</button>\n      </p>\n    ))}\n  </div>\n);\n\nexport default Persons;\n","import React from \"react\";\n\nconst good = {\n  color: \"green\",\n  background: \"lightgrey\",\n  fontSize: 20,\n  borderStyle: \"solid\",\n  borderRadius: 5,\n  padding: 10,\n  marginBottom: 10,\n};\nconst errorS = {\n  color: \"red\",\n  background: \"lightgrey\",\n  fontSize: 20,\n  borderStyle: \"solid\",\n  borderRadius: 5,\n  padding: 10,\n  marginBottom: 10,\n};\n\nconst Notification = ({ message, error }) => {\n  if (message === null) {\n    return <p></p>;\n  }\n  return <div style={error ? errorS : good}>{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport personServices from \"./services/persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"First Last\");\n  const [newNumber, setNewNumber] = useState(\"000-000-0000\");\n  const [filter, setNewFilter] = useState(\"\");\n  const [message, setMessage] = useState(null);\n  const [error, setError] = useState(true);\n\n  useEffect(() => {\n    personServices.getPersons().then((persons) => setPersons(persons));\n  }, []);\n  const handlePersonChange = (event) => setNewName(event.target.value);\n  const handleNumberChange = (event) => setNewNumber(event.target.value);\n  const handleFilterChange = (event) => setNewFilter(event.target.value);\n  const addPerson = (event) => {\n    event.preventDefault();\n    let personObj = {\n      name: newName,\n      number: newNumber,\n    };\n    let oldPerson = persons.filter((person) => person.name === newName);\n    if (oldPerson.length > 0) {\n      const yes = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n      if (!yes) {\n        return;\n      }\n      let updatedPerson = {\n        ...oldPerson[0],\n        number: newNumber,\n      };\n      personServices\n        .personUpdate(updatedPerson)\n        .then((returnedPerson) =>\n          setPersons(\n            persons.map((person) =>\n              person.id !== returnedPerson.id ? person : returnedPerson\n            )\n          )\n        )\n        .catch(() => {\n          setError(true);\n          setMessage(\n            ` information of ${updatedPerson.name} has already been removed from server`\n          );\n          setTimeout(() => setMessage(null), 5000);\n          setPersons(\n            persons.filter((person) => person.id !== updatedPerson.id)\n          );\n        });\n    } else {\n      personServices\n        .createPerson(personObj)\n        .then((returnedPerson) => {\n          setError(false);\n          setMessage(`Added ${returnedPerson.name}`);\n          setTimeout(() => setMessage(null), 5000);\n          setPersons(persons.concat(returnedPerson));\n          return;\n        })\n        .catch((error) => {\n          setError(true);\n          setMessage(error.response.data.error);\n          setTimeout(() => setMessage(null), 5000);\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n  const handleDelete = (deletedPerson) => {\n    const final = window.confirm(`Delete ${deletedPerson.name}`);\n    if (!final) {\n      return;\n    }\n    personServices\n      .personDelete(deletedPerson.id)\n      .then(() =>\n        setPersons(persons.filter((person) => person.id !== deletedPerson.id))\n      );\n  };\n  let filteredPersons = persons.filter((person) =>\n    person.name.toLowerCase().includes(filter.toLowerCase())\n  );\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} error={error} />\n      <Filter value={filter} handleFilterChange={handleFilterChange} />\n      <PersonForm\n        formSubmit={addPerson}\n        name={newName}\n        nameChange={handlePersonChange}\n        number={newNumber}\n        numberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons handleDelete={handleDelete} persons={filteredPersons} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}